<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <title>Login</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
  *{
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'poppins',sans-serif;
  }
  body{
  
       /* Set background image using a URL */
       background-image: url('/bg8.png');
  
  /* Optionally, you can specify additional properties to control the background */
  background-repeat: no-repeat;
  /* Prevent the image from repeating */
  background-size: cover;
  /* Cover the entire viewport */
  background-position: center;
  /* Center the image */
  }
  .container{
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
  }
  
  .logo {
             margin-right: 150px;
             height: 20vh;
             width: 75vh;
             
          }
  .box{
      display: flex;
      flex-direction: row;
      position: relative;
      padding: 60px 20px 30px 20px;
      height: 620px;
      width: 350px;
      border-radius: 30px;
      background-color: rgba(255, 220, 220, 0.406);
      -webkit-backdrop-filter: blur(15px);
      backdrop-filter: blur(15px);
      border: 3px solid rgba(255, 255, 255, 0.2);
      overflow: hidden;
  }
  .box-login{
      position: absolute;
      width: 85%;
      left: 27px;
      transition: .1s ease-in-out;
  }
  .box-register{
      position: absolute;
      width: 85%;
      right: -350px;
      transition: .1s ease-in-out;
  }
  .top-header{
      text-align: center;
      margin: 30px 0;
  }
  .top-header h3{
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 8px;
  }
  .input-group{
       width: 100%;
      
  }
  .input-field{
      margin: 12px 0;
      position: relative;
  }
  .input-box{
      width: 100%;
      height: 50px;
      font-size: 15px;
      color: #040404;
      border: none;
      border-radius: 10px;
      padding: 7px 45px 0 20px;
      background: rgba(224, 223, 223, 0.6);
      backdrop-filter: blur(2px);
      outline: none;
  }
  .input-field label{
      position: absolute;
      left: 20px;
      top: 15px;
      font-size: 15px;
      transition: .1s ease-in-out;
  }
  .input-box:focus ~ label,.input-box:valid ~ label{
      top: 2px;
      font-size: 10px;
      color: #c12828;
      font-weight: 500;
  }
  .remember{
      display: flex;
      font-size: 13px;
      margin: 12px 0 30px 0;
      color: #000000;
  }
  .check{
      margin-right: 8px;
      width: 14px;
  }
  .input-submit{
      width: 100%;
      height: 40px;
      font-size: 15px;
      
      font-weight: 500;
      border: none;
      border-radius: 10px;
      background: #bc6202;
      color: #fff;
      box-shadow: 0px 4px 20px rgba(62, 9, 9, 0.144);
      cursor: pointer;
      transition: .1s;
  }
  .input-submit:hover{
      background:  #db3e00;
      box-shadow: 0px 4px 20px rgba(62, 9, 9, 0.32);
  }
  .forgot{
      text-align: center;
      font-size: 12px;
      font-weight: 500;
      margin-top: 40px;
  
  }
  .forgot a{
      text-decoration: none;
      color: #000;
  }
  .switch{
      display: flex;
      position: absolute;
      bottom: 50px;
      left: 25px;
      width: 85%;
      height: 50px;
      background: rgba(255, 255, 255, 0.16);
      backdrop-filter: 10px;
      border-radius: 10px;
      box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
  }
  .switch a{
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      font-weight: 500;
      color: #000;
      text-decoration: none;
      width: 50%;
      height: 50px;
      border-radius: 10px;
      z-index: 10;
  }
  #btn{
      position: absolute;
      bottom: 0px;   
      left: 0px;
      width: 140px;
      height: 50px;
      background: #cccccd;
      border-radius: 10px;
      box-shadow: 2px 0px 12px rgba(0, 0, 0, 0.1);
      transition: .1s ease-in-out;
  }
  .eye-area{
      position: absolute;
      top: 25px;
      right: 25px;
  }
  .eye-box{
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      
  }
  i{
      position: absolute;
      color: #444444;
      cursor: pointer;
  }
  #eye,#eye-2{
      opacity: 1;
  }
  #eye-slash,#eye-slash-2{
      opacity: 0;}
  @media only screen and (max-width: 576px){
      .box{
          margin: 0 5px;
      }
      #btn{
          position: absolute;
          width: 153px;
      }
  }
  .back-button {
      position: absolute;
      top: 20px;
      left: 20px;
      cursor: pointer;
      color: white;
  }
  .back-button i {
      color: white; /* Set color to white */
  }
      </style>
</head>
<body>
   

     <div class="container">
        <a href="/accesss" class="back-button"><i class="fas fa-arrow-left fa-lg"></i></a>
        <img src='/loo4.png' class="logo" alt="Logo">
        <div class="box">
        <div class="box-login" id="login">
            <div class="top-header">
               <!-- <img src='/logo1.png' width="50"> -->
                <h3>Hello, Again!</h3>
                <small>We are happy to have you back.</small>
            </div>
            <div class="input-group">
                 <div class="input-field">
                    <input type="text" class="input-box" id="logEmail" required>
                    <label for="logEmail">Email_address</label>
                 </div>
                 <div class="input-field">
                    <input type="password" class="input-box" id="logPassword" required>
                    <label for="logPassword">Password</label>
                    <div class="eye-area">
                     <div  class="eye-box" onclick="myLogPassword()">
                      <i class="fa-regular fa-eye" id="eye"></i>
                      <i class="fa-regular fa-eye-slash" id="eye-slash"></i>
                   </div>
                 </div>
                 </div>
                 <div class="remember">
                    <input type="checkbox" id="formCheck" class="check">
                    <label for="formCheck">Remember Me</label>
                 </div>
                 <div class="input-field"> 
                    <button class="input-submit" id="signInButton">Sign In</button>

                  <!--<input type="submit" class="input-submit" id="button" value="Sign In" required>-->
                
              </div>
                 <div class="forgot">
                    <a href="#">Forgot password?</a>
                 </div>
                
            </div>
         </div>
            <!---------------------------- register --------------------------------------->
          <div class="box-register" id="register">
            <div class="top-header">
               <img src='/logo1.png' width="50">
                <h3>Sign Up, Now!</h3>
                <small>We are happy to have you with us.</small>
            </div>
            <div class="input-group">
                 <div class="input-field">
                    <input type="text" class="input-box" id="regUsername" required>
                    <label for="regUsername">Username</label>
                 </div>
                 <div class="input-field">
                    <input type="text" class="input-box" id="regEmail"  required>
                    <label for="regEmail">Email_address</label>
                 </div>
                 <div class="input-field">
                    <input type="password" class="input-box" id="regPassword"  required>
                    <label for="regPassword">Password</label>
                    <div class="eye-area">
                      <div  class="eye-box" onclick="myRegPassword()">
                       <i class="fa-regular fa-eye" id="eye-2"></i>
                       <i class="fa-regular fa-eye-slash" id="eye-slash-2"></i>
                    </div>
                  </div>
                 </div>
                 
                 <!-- <div class="remember">
                    <input type="checkbox" id="formCheck2" class="check">
                    <label for="formCheck2">Remember Me</label>
                 </div> --><br>
                 
                 <div class="input-field">
                    <button class="input-submit" id="signUpButton">Sign Up</button>
                 </div>
            </div>
         </div>
         <!-- <div class="switch">
            <a href="#" class="login active" onclick="login()">Login</a>
            <a href="#" class="register" onclick="register()">Register</a>
            <div class="btn-active" id="btn"></div>
         </div> -->
         
        </div>
        
     </div>
     <script>
        var x = document.getElementById('login');
        var y = document.getElementById('register');
        var z = document.getElementById('btn');
        function login(){
            x.style.left = "27px";
            y.style.right = "-350px";
            z.style.left = "0px";
        }
        function register(){
            x.style.left = "-350px";
            y.style.right = "25px";
            z.style.left = "150px";
        }
   // View Password codes
         
      
        function myLogPassword(){
         var a = document.getElementById("logPassword");
         var b = document.getElementById("eye");
         var c = document.getElementById("eye-slash");
         if(a.type === "password"){
            a.type = "text";
            b.style.opacity = "0";
            c.style.opacity = "1";
         }else{
            a.type = "password";
            b.style.opacity = "1";
            c.style.opacity = "0";
         }
        }
        function myRegPassword(){
    
         var d = document.getElementById("regPassword");
         var b = document.getElementById("eye-2");
         var c = document.getElementById("eye-slash-2");
 
         if(d.type === "password"){
            d.type = "text";
            b.style.opacity = "0";
            c.style.opacity = "1";
         }else{
            d.type = "password";
            b.style.opacity = "1";
            c.style.opacity = "0";
         }
        }

        // Function to display a success pop-up message
        function showSuccessMessage(message) {
            alert(message); // You can replace this with your custom pop-up implementation
        }

        // Function to display an error pop-up message
        function showErrorMessage(message) {
            alert(message); // You can replace this with your custom pop-up implementation
        }

        function validateEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return regex.test(email);
        }

         // Function to validate password
         function validatePassword(password) {
            // Regular expressions for password validation
            var capitalAlphabetRegex = /[A-Z]/;
            var smallAlphabetRegex = /[a-z]/;
            var numberRegex = /[0-9]/;
            var specialCharacterRegex = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/;

            // Check minimum length
            if (password.length < 8) {
                return "Password must be at least 8 characters long.";
            }

            // Check for capital alphabet
            if (!capitalAlphabetRegex.test(password)) {
                return "Password must contain at least one capital alphabet.";
            }

            // Check for small alphabet
            if (!smallAlphabetRegex.test(password)) {
                return "Password must contain at least one small alphabet.";
            }

            // Check for number
            if (!numberRegex.test(password)) {
                return "Password must contain at least one number.";
            }

            // Check for special character
            if (!specialCharacterRegex.test(password)) {
                return "Password must contain at least one special character.";
            }

            // Password meets all criteria
            return "valid";
        }
        var logemail = document.getElementById("logEmail");
var logpassword = document.getElementById("logPassword");
document.getElementById("signInButton").addEventListener("click", function(event) {
    event.preventDefault(); // Prevent default form submission behavior

    var logemail = document.getElementById("logEmail").value;
    var logpassword = document.getElementById("logPassword").value;

    // Check if email and password are provided
    if (!logemail || !logpassword) {
        alert("Please enter both email and password.");
        return;
    }

    // Validate email format
    if (!validateEmail(logemail)) {
                alert("Please enter a valid email address.");
                return;
            }
    // Validate password
     if (!validatePassword(regPassword)) {
                showErrorMessage("Password must have mixed letters of Capital alphabet, Small alphabet, numbers, special characters and should have a maximum length of 8 characters.");
                return;
            }


        var obj = {
        Email_address: logemail,
        password: logpassword
        };

    fetch("/contact", {
        method: "POST",
        headers: {
            "Content-type": "application/json"
        },
        body: JSON.stringify(obj)
    })
    .then(response => {
        console.log(response)
        if (response.ok) {
            // showSuccessMessage("Login successfull."); // Updated: Display success pop-up
            // Redirect to dashboard page upon successful login
            window.location.href = "/dashboards";
        } else if (response.status === 401) {
            // Update the error message here
        showErrorMessage("Invalid credentials."); // Display "Invalid credentials" if the response status is 401
            // Invalid credentials, redirect to login page
            setTimeout(() => {
            window.location.href = "/home";
        }, 2000); // Redirect after 2 seconds (adjust as needed)
        } else {
            throw new Error('Invalid Email or Password');
        }
    })
    .catch(error => {
        showErrorMessage(error.message); // Updated: Display error pop-up
        // Handle error here
        console.error('Error:', error);
    });
});



// JavaScript code for handling form submission
document.getElementById("signUpButton").addEventListener("click", function(event) {
    event.preventDefault(); // Prevent default form submission behavior

    var regUsername = document.getElementById("regUsername").value;
    var regEmail = document.getElementById("regEmail").value;
    var regPassword = document.getElementById("regPassword").value;

    // Check if all fields are provided
    if (!regUsername || !regEmail || !regPassword) {
        alert("Please fill in all fields.");
        return;
    }
     // Validate email format
     if (!validateEmail(regEmail)) {
                alert("Please enter a valid email address.");
                return;
            }
    // Validate password
    var passwordValidationResult = validatePassword(regPassword);
    if (passwordValidationResult !== "valid") {
        showErrorMessage("Password must have mixed letters of Capital alphabet, Small alphabet, numbers, special characters and should have a maximum length of 8 characters.");
        return;
    }
    // Create an object with user data
    var userData = {
        username: regUsername,
        email: regEmail,
        password: regPassword
    };

    // Send a POST request to the server to register the user
    fetch("/register", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(userData)
    })
    .then(response => {
        if (response.ok) {
            showSuccessMessage("User registered successfully."); // Updated: Display success pop-up
            // Redirect to login page upon successful registration
            window.location.href = "/home";
        } else {
            throw new Error('Failed to register user.');
        }
    })
    .catch(error => {
        showErrorMessage(error.message); // Updated: Display error pop-up
        // Handle error here
        console.error('Error:', error);
    });
});


</script>
</body>
</html>

